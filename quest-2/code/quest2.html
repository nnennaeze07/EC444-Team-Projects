<!-- Quest 2 (Team 15)
Authors: Nnenna Eze, Lesbeth Roque
Date: 10/10/2020t -->
<!DOCTYPE HTML>
<html>
<head>
<title>
Quest 2 Data
</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type = "text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script type = "text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>

<script type = "text/javascript">
var thermst = [];
var irrf = [];
var ultras = [];
var timesvar = 0;
var times = [timesvar];

window.setInterval(function() {
	window.onload = function () {
		var chart = new CanvasJS.Chart("chartContainer", {
		title:{
			text: "Quest 2 Sensor Data"
		},
		data: [{
								type: "line",
								name: "Thermistor",
								showInLegend: true,
								dataPoints: thermst
							},
							{
								type: "line",
								name: "Ultrasonic",
								showInLegend: true,
								dataPoints: ultras
							},
							{
								type: "line",
								name: "IR Rangefinder",
								showInLegend: true,
								dataPoints: irrf
							},
							// {
							// 	type: "line",
							// 	name: "MFST",
							// 	showInLegend: true,
							// 	dataPoints: msft
							// },

						]
		});
		$.ajax({url: "/data", success: function(result){
			console.log(result);

			for (var i = 0;i<result.length;i++){
				var contents = result[i]
				thermst.push({
					x: parseFloat(contents[0]),
					y: parseFloat(times[i])
				});

				ultras.push({
					x: parseFloat(contents[1]),
					y: parseFloat(times[i])
				});

				irrf.push({
					x: parseFloat(contents[2]),
					y: parseFloat(times[i])
				});
				times.push(timesvar + 3);
				timesvar = timesvar + 3;
			}
				 chart.render();
			 }});
	}
 alert('graph updated');
}, 3000);


	</script>
	</head>
	<body>
	<div id="chartContainer" ></div>
	</body>
	</html>
